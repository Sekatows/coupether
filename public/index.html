<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coupether by Sekatow</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="logo">Coupether</div>
            
            <div class="navbar-center">
                <div id="connectionStatus" class="connection-status">
                    <div class="status-indicator"></div>
                    <span class="status-text">Connecting...</span>
                </div>
                
                <!-- URL Input solo visible en sala -->
                <div id="urlInputNav" class="url-input-container hidden">
                    <input type="text" id="videoUrl" placeholder="Paste YouTube, Twitch, Kick or Google Drive URL here..." class="video-url-input">
                    <div id="platformIndicator" class="platform-indicator">
                        <span id="platformText">Platform</span>
                    </div>
                    <button onclick="loadVideo()" class="btn-load">Load</button>
                </div>
            </div>
            
            <div class="navbar-right">
                <!-- Info de sala solo visible en sala -->
                <div id="roomInfoNav" class="room-info-nav hidden">
                    <span>Room <span id="currentRoom" class="room-code-nav"></span></span>
                    <span>â€¢</span>
                    <span>ðŸ‘¥ <span id="userCount">0</span></span>
                </div>
                <button id="leaveBtn" onclick="leaveRoom()" class="btn-leave hidden">Leave</button>
            </div>
        </nav>

        <!-- Pantalla inicial -->
        <div id="homeScreen" class="home-screen">
            <div class="home-header">
                <h1 class="home-logo">Coupether</h1>
                <p class="tagline">Watch videos together, anywhere</p>
                <p class="supported-platforms">Now supporting multiple platforms</p>
                <div class="platform-badges">
                    <span class="platform-badge youtube">YouTube</span>
                    <span class="platform-badge twitch">Twitch</span>
                    <span class="platform-badge kick">Kick</span>
                    <span class="platform-badge drive">Google Drive</span>
                </div>
            </div>
            
            <div class="actions-grid">
                <button onclick="createRoom()" id="createBtn" class="action-btn primary" disabled>
                    <div class="btn-icon">+</div>
                    <div class="btn-content">
                        <span class="btn-title">Create Room</span>
                        <span class="btn-subtitle">Start a new watch party</span>
                    </div>
                </button>
                <button onclick="showJoinForm()" id="joinBtn" class="action-btn secondary" disabled>
                    <div class="btn-icon">â†’</div>
                    <div class="btn-content">
                        <span class="btn-title">Join Room</span>
                        <span class="btn-subtitle">Enter an existing room</span>
                    </div>
                </button>
            </div>
        </div>

        <!-- Layout principal - Video + Chat -->
        <div id="mainLayout" class="main-layout hidden">
            <div class="video-section">
                <div class="video-container">
                    <div id="player"></div>
                    <div id="noVideo" class="no-video-state">
                        <div class="empty-state">
                            <div class="empty-icon">ðŸ“º</div>
                            <h3>Ready to watch together?</h3>
                            <p>Paste a URL above to get started</p>
                            <div class="supported-urls">
                                YouTube â€¢ Twitch â€¢ Kick â€¢ Google Drive
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="chat-panel">
                <div class="chat-header">
                    <h3 class="panel-title">Chat</h3>
                    <div class="users-count">ðŸ‘¥ <span id="userCountChat">0</span> participants</div>
                    
                    <!-- Controles de voz -->
                    <div class="voice-controls">
                        <button id="micButton" class="mic-button disabled" onclick="toggleMicrophone()" title="Toggle microphone">
                            ðŸŽ¤
                        </button>
                        <div class="voice-status">
                            <span id="voiceStatus">Click to enable voice</span>
                        </div>
                        <div class="voice-visualizer">
                            <div class="voice-indicator"></div>
                            <div class="voice-indicator"></div>
                            <div class="voice-indicator"></div>
                            <div class="voice-indicator"></div>
                        </div>
                    </div>
                </div>
                <div id="chatMessages" class="chat-messages"></div>
                <div class="message-input-container">
                    <input type="text" id="messageInput" placeholder="Type a message..." class="message-input">
                    <button onclick="sendMessage()" class="btn-send">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de formulario de unirse -->
    <div id="joinFormModal" class="modal-overlay">
        <div class="join-form">
            <div class="form-content">
                <h3 class="form-title">Join a Room</h3>
                <div class="input-group">
                    <label for="username">Your name</label>
                    <input type="text" id="username" placeholder="Enter your name" maxlength="20">
                </div>
                <div class="input-group">
                    <label for="roomCode">Room code</label>
                    <input type="text" id="roomCode" placeholder="Enter room code" maxlength="8" style="text-transform: uppercase;">
                </div>
                <div class="form-actions">
                    <button onclick="joinRoom()" class="btn-primary">Join Room</button>
                    <button onclick="hideJoinForm()" class="btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="app.js"></script>
</body>
</html>